<!DOCTYPE html>
<html>
<head>
    <title>URL Debug Test</title>
</head>
<body>
    <h1>URL Debug Test</h1>
    <div id="output"></div>
    
    <script type="module">
        import { URLParser } from './src/urlParser.js';
        import { EventBus } from './src/eventBus.js';
        
        const eventBus = new EventBus();
        const urlParser = new URLParser(eventBus);
        
        const output = document.getElementById('output');
        
        // Test the problematic URL
        const testUrl = 'https://piarasj.github.io/timer/timer-v2.html?segments=03%3A05%2C5%2Cup%7C18%3A00%2C8%2Cup';
        
        output.innerHTML = '<h2>Testing URL:</h2><p>' + testUrl + '</p>';
        
        console.log('Testing URL:', testUrl);
        
        const result = urlParser.parseUrlParameters(testUrl);
        console.log('Parse result:', result);
        
        output.innerHTML += '<h2>Parse Result:</h2><pre>' + JSON.stringify(result, null, 2) + '</pre>';
        
        if (result && result.segments) {
            output.innerHTML += '<h2>Segments:</h2>';
            result.segments.forEach((segment, i) => {
                output.innerHTML += '<p>Segment ' + i + ': ' + segment.time + ' for ' + segment.duration + 'min (' + segment.mode + ')</p>';
            });
        }
    </script>
</body>
</html>
