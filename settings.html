<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Generate Timer Settings</title>
  <style>
    body {
      background: black; color: white;
      font-family: -apple-system, sans-serif;
      display: flex; justify-content: center; align-items: center;
      min-height: 100vh; margin: 0;
    }
    .box { background: rgba(255,255,255,0.1); padding: 2rem; border-radius: 1rem; max-width: 400px; }
    label { display: block; margin-top: 1rem; }
    input, button { margin-top: 0.5rem; width: 100%; padding: 0.75rem; font-size: 1rem; border-radius: 0.5rem; border: none; }
    button { margin-top: 2rem; background: #22c55e; color: white; cursor: pointer; }
    pre { margin-top: 1rem; background: rgba(0,0,0,0.6); padding: 1rem; border-radius: 0.5rem; max-height: 200px; overflow-y: auto; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Timer Settings</h2>
    <label>
      Auto-start time (HH:MM)
      <input type="time" id="startTime" value="09:00">
    </label>
    <label>
      Segment duration (minutes)
      <input type="number" id="segmentDuration" value="40" min="1">
    </label>
    <button onclick="generateJSON()">Generate JSON File</button>
    <pre id="output"></pre>
  </div>

<script>
function generateJSON() {
  const startTime = document.getElementById("startTime").value;
  const durationMinutes = parseInt(document.getElementById("segmentDuration").value, 10);

  // build segments
  const numSegments = 5;
  const segments = [];
  let [h, m] = startTime.split(":").map(Number);
  let baseMinutes = h*60 + m;

  for (let i=0; i<numSegments; i++) {
    const segMins = baseMinutes + i*durationMinutes;
    const segH = Math.floor(segMins/60)%24;
    const segMin = segMins%60;
    const segTime = `${String(segH).padStart(2,"0")}:${String(segMin).padStart(2,"0")}`;
    const startAngle = (segMin*6) - 90; // minute hand position in degrees
    segments.push({ startTime: segTime, duration: durationMinutes*60, startAngle });
  }

  const settings = {
    autoStart: startTime,
    segmentDuration: durationMinutes*60,
    segments
  };

  // show preview
  document.getElementById("output").textContent = JSON.stringify(settings, null, 2);

  // create downloadable file
  const blob = new Blob([JSON.stringify(settings, null, 2)], { type: "application/json" });
  const url = URL.createObjectURL(blob);
  const a = document.createElement("a");
  a.href = url;
  a.download = "settings.json";
  a.click();
  URL.revokeObjectURL(url);
}
</script>
</body>
</html>